<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>roshambo</title>
  <style>

  </style>
</head>
<body>
    <button class="btn">Rock</button>
    <button class="btn">Paper</button>
    <button class="btn">Scissors</button>
    <div id="results"></div>
    <div id="score"></div>

  <script>
        
        function computerPlay (){
            let num = 3 * Math.random();
            if (num < 1) {
                return ("Rock");
            } else if (num > 2){
                return ("Scissors");
            } else {
                return ("Paper");
            }
        }
        
        function playRound(e){
            let pSel = e.target.innerText;
            let cSel = computerPlay();
            if (pSel == "Rock" && cSel == "Scissors" || 
                pSel == "Paper" && cSel == "Rock" || 
                pSel == "Scissors" && cSel == "Paper"){
                    return ("You Win! " + pSel + " Beats " + cSel+  ".");
            } else if (pSel == cSel){
                return ("It's a Draw on " + pSel + ".");
            } else {
                return ("You Lose! " + cSel + " Beats " + pSel + ".");
            }  
        }

        let pScore = 0;
        let cScore = 0;

        function gameFunction(e){
            const results = document.querySelector("#results");
            const score = document.querySelector("#score");
            
            const message = playRound(e);

            if (message.charAt(4) == "W"){
                pScore ++;
            } else if (message.charAt(4) == "L"){
                cScore ++;
            }

            let scoreMessage = "Score: " + pScore + " to " + cScore;

            if (pScore >= 5){
                scoreMessage += "  You won the match.";
                pScore = 0;
                cScore = 0;
            } else if (cScore >= 5){
                scoreMessage += "  You won the match.";
                pScore = 0;
                cScore = 0;
            }
            results.textContent = message;
            score.textContent = scoreMessage;
        }

        const buttons = document.querySelectorAll('.btn');
        console.log(buttons);
        buttons.forEach(button => button.addEventListener('click', gameFunction));

    </script>
</body>
</html>
